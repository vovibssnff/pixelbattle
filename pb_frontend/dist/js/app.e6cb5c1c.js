(function(){var t={298:function(t,e,i){"use strict";var o=i(6768);const s={class:"app"};function a(t,e){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(i)])}var l=i(1241);const n={},r=(0,l.A)(n,[["render",a]]);var h=r;const c={class:"login-page"};function d(t,e,i,s,a,l){const n=(0,o.g2)("app-header"),r=(0,o.g2)("v-k-login-btn");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(n),(0,o.bF)(r)])}const u=t=>((0,o.Qi)("data-v-605056b0"),t=t(),(0,o.jt)(),t),g={class:"header"},v=u((()=>(0,o.Lk)("h1",null,"Добро пожаловать на Pixelbattle!",-1))),m=u((()=>(0,o.Lk)("br",null,null,-1))),p=u((()=>(0,o.Lk)("br",null,null,-1))),f=u((()=>(0,o.Lk)("br",null,null,-1)));function w(t,e,i,s,a,l){return(0,o.uX)(),(0,o.CE)("div",g,[v,m,p,f,(0,o.eW)(" Пусть же рука твоя будет тверда, а дух — неколебим. Веди перо свое, дабы создать творение, коему позавидуют сами небеса! ")])}var b={};const y=(0,l.A)(b,[["render",w],["__scopeId","data-v-605056b0"]]);var x=y;const _={id:"VKIDAuthContainer"},S=(0,o.Fv)('<div class="VkIdWebSdk__button_container" data-v-ff019904><div class="VkIdWebSdk__button_icon" data-v-ff019904><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ff019904><path fill-rule="evenodd" clip-rule="evenodd" d="M4.54648 4.54648C3 6.09295 3 8.58197 3 13.56V14.44C3 19.418 3 21.907 4.54648 23.4535C6.09295 25 8.58197 25 13.56 25H14.44C19.418 25 21.907 25 23.4535 23.4535C25 21.907 25\n           19.418 25 14.44V13.56C25 8.58197 25 6.09295 23.4535 4.54648C21.907 3 19.418 3 14.44 3H13.56C8.58197 3 6.09295 3 4.54648 4.54648ZM6.79999 10.15C6.91798 15.8728 9.92951 19.31 14.8932 19.31H15.1812V16.05C16.989 16.2332 18.3371\n           17.5682 18.8875 19.31H21.4939C20.7869 16.7044 18.9535 15.2604 17.8141 14.71C18.9526 14.0293 20.5641 12.3893 20.9436 10.15H18.5722C18.0747 11.971 16.5945 13.6233 15.1803 13.78V10.15H12.7711V16.5C11.305 16.1337 9.39237 14.3538 9.314 10.15H6.79999Z" fill="#134293" data-v-ff019904></path></svg></div><div class="VkIdWebSdk__button_text" data-v-ff019904> Войти через VK ID </div></div>',1),A=[S];function T(t,e,i,s,a,l){return(0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("button",{id:"VKIDSDKAuthButton",class:"VkIdWebSdk__button VkIdWebSdk__button_reset",onClick:e[0]||(e[0]=(...t)=>l.handleClick&&l.handleClick(...t))},A)])}var E=i(3906),k=i(782),C={components:{AppHeader:x},methods:{...(0,k.PY)("UserModule",["setAuthorized"]),auth(t){this.setAuthorized(t)},handleClick(){this.auth("in_progress"),E.Nj.login()}},beforeMount(){E.TS.set({app:51845999,redirectUrl:"https://"+window.location.hostname+"/api/login"});const t=document.getElementById("VKIDSDKAuthButton");t&&(t.onclick=this.handleClick)}};const P=(0,l.A)(C,[["render",T],["__scopeId","data-v-ff019904"]]);var I=P,F={components:{AppHeader:x,VKLoginBtn:I},beforeCreate(){document.title="Login to Pixelbattle"}};const U=(0,l.A)(F,[["render",d],["__scopeId","data-v-466f932f"]]);var D=U;function L(t,e,i,s,a,l){const n=(0,o.g2)("g-l-canvas");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(n)])}var R=i(4232);const W=t=>((0,o.Qi)("data-v-22bb0418"),t=t(),(0,o.jt)(),t),M={oncontextmenu:"return false;"},z={id:"ui-wrapper",hide:"true"},V=W((()=>(0,o.Lk)("p",{id:"loading-p"},null,-1))),X={id:"color-wrapper"},O=["item","onClick"],B=["placeholder","value"],$=(0,o.Fv)('<label for="checkbox" id="howto" data-v-22bb0418>?</label><input hidden type="checkbox" id="checkbox" data-v-22bb0418><label for="checkbox" class="modal-overlay" data-v-22bb0418><div class="modal" data-v-22bb0418><h1 data-v-22bb0418>О мудром владении цветами и пергаментом на веб-сайте</h1><br data-v-22bb0418><br data-v-22bb0418> Слушай же, о путник, и ведай, как управляться с волшебной палитрой: <br data-v-22bb0418><br data-v-22bb0418> ПКМ — держи перо крепко, дабы узоры чертить.<br data-v-22bb0418> ЛКМ — ведай путь свой верно, дабы по холсту странствовать.<br data-v-22bb0418> CTRL + ПКМ — познай цвет истинный, да занеси его в палитру свою.<br data-v-22bb0418><br data-v-22bb0418><span data-v-22bb0418>В помощь тебе — <a href="https://color-hex.com" data-v-22bb0418>цветная книга мудрецов</a></span><br data-v-22bb0418><br data-v-22bb0418> Время течет, как река, и ставить пиксели дозволено лишь раз в три удара сердца. <br data-v-22bb0418> Пусть же рука твоя будет тверда, а дух — неколебим. Веди перо свое, дабы создать творение, коему позавидуют сами небеса! <label for="checkbox" data-v-22bb0418>X</label></div></label>',3),N={id:"zoom-wrapper"},Y={id:"cursor-info"},G={id:"x-coordinate"},H={id:"y-coordinate"},K={id:"timer"};function Z(t,e,i,s,a,l){return(0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("canvas",{onTouchstart:e[0]||(e[0]=(...t)=>l.onTouchStart&&l.onTouchStart(...t)),onMousedown:e[1]||(e[1]=(...t)=>l.onMouseDown&&l.onMouseDown(...t)),onTouchend:e[2]||(e[2]=(...t)=>l.onTouchEnd&&l.onTouchEnd(...t)),onMousemove:e[3]||(e[3]=(...t)=>l.coordsUpdate&&l.coordsUpdate(...t)),onContextmenu:()=>!1,id:"viewport-canvas"},null,32),(0,o.Lk)("div",z,[V,(0,o.Lk)("div",X,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.palette,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,item:t,onClick:t=>{t.preventDefault(),this.selectSwatch(e)},class:"color-swatch",style:(0,R.Tr)({backgroundColor:t}),ref_for:!0,ref:"swatches"},null,12,O)))),128)),(0,o.Lk)("input",{onChange:e[4]||(e[4]=(...t)=>l.onChange&&l.onChange(...t)),id:"color-field",type:"text",placeholder:a.palette[a.activeSwatch],value:a.palette[a.activeSwatch]},null,40,B)]),$,(0,o.Lk)("div",N,[(0,o.Lk)("button",{onClick:e[5]||(e[5]=()=>{this.zoomOut(1.2)}),class:"zoom-button",id:"zoom-out"},"-"),(0,o.Lk)("button",{onClick:e[6]||(e[6]=()=>{this.zoomIn(1.2)}),class:"zoom-button",id:"zoom-in"},"+")]),(0,o.Lk)("div",Y,[(0,o.Lk)("span",G,(0,R.v_)(Math.floor(this.val_x)),1),(0,o.eW)(", "),(0,o.Lk)("span",H,(0,R.v_)(Math.floor(this.val_y)),1)]),(0,o.Lk)("div",K,(0,R.v_)(this.seconds),1)])])}i(4114),i(7467),i(4732),i(9577),i(4603),i(7566),i(8721);var j=i(1114);const q="\n\tprecision mediump float;\n\tattribute vec2 vert;\n\tuniform vec2 cam;\n\tuniform vec2 tex_scale;\n\tuniform vec2 view_scale;\n\tuniform float zoom;\n\tvarying vec2 uv;\n\tvoid main() {\n\t\tuv = vert + 0.5;\n\t\tvec2 pos = ((vert * tex_scale - cam) * zoom) / view_scale;\n\t\tpos += 0.5;\n\t\tpos.y = 1.0 - pos.y;\n\t\tgl_Position = vec4(pos * 2.0 - 1.0, 0.0, 1.0);\n\t}\n",J="\n\tprecision mediump float;\n\tuniform sampler2D tex;\n\tvarying vec2 uv;\n\tvoid main() {\n\t\tgl_FragColor = texture2D(tex, uv);\n\t}\n";class Q{constructor(t){if((0,j.A)(this,"cvs",void 0),(0,j.A)(this,"gl",void 0),(0,j.A)(this,"program",void 0),(0,j.A)(this,"tex",void 0),(0,j.A)(this,"texFramebuffer",void 0),(0,j.A)(this,"texScale",void 0),(0,j.A)(this,"camPos",void 0),(0,j.A)(this,"zoom",void 0),(0,j.A)(this,"u_cam",void 0),(0,j.A)(this,"u_zoom",void 0),(0,j.A)(this,"u_tex",void 0),(0,j.A)(this,"u_view",void 0),(0,j.A)(this,"a_vert",void 0),this.cvs=t,this.gl=t.getContext("webgl"),null==this.gl)return void alert("Couldn't get webgl context.");this.texScale={x:0,y:0},this.camPos={x:0,y:0},this.zoom=1;const e=this.compileShader(this.gl.VERTEX_SHADER,q),i=this.compileShader(this.gl.FRAGMENT_SHADER,J);this.createProgram(e,i),this.createPosAttribute(),this.createUniforms(),this.updateViewScale(),this.gl.clearColor(0,0,0,0)}ok(){return null!=this.gl}draw(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setTexture(t){this.tex=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.texFramebuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.texFramebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.tex,0),this.texScale={x:t.width,y:t.height},this.gl.uniform2f(this.u_tex,this.texScale.x,this.texScale.y),this.cvs.width>this.cvs.height?this.zoom=this.cvs.width/this.texScale.x:this.zoom=this.cvs.height/this.texScale.y,this.setZoom(this.zoom)}setPixelColor(t,e,i){let o=new Uint8Array(4);o[3]=255;for(let s=0;s<i.length;s++)o[s]=i[s];this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,t,e,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o)}getColor(t){let e=new Uint8Array(4);return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.texFramebuffer),this.gl.readPixels(t.x,t.y,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),e.slice(0,3)}scroll(t){this.camPos={x:t.target.scrollLeft,y:t.target.scrollTop},this.gl.uniform2f(this.u_cam,this.camPos.x,this.camPos.y)}move(t,e){this.camPos.x-=t/this.zoom,this.camPos.y-=e/this.zoom,this.gl.uniform2f(this.u_cam,this.camPos.x,this.camPos.y)}setZoom(t){t<.01&&(t=.01),t>40&&(t=40),this.zoom=t,this.gl.uniform1f(this.u_zoom,t)}getZoom(){return this.zoom}updateViewScale(){let t=this.cvs.clientWidth,e=this.cvs.clientHeight;this.cvs.width=t,this.cvs.height=e,this.gl.viewport(0,0,t,e),this.gl.uniform2f(this.u_view,t,e)}click(t){t.x/=this.cvs.width,t.y/=this.cvs.height;let e={x:(-.5*this.texScale.x-this.camPos.x)*this.zoom/this.cvs.width+.5,y:(-.5*this.texScale.y-this.camPos.y)*this.zoom/this.cvs.height+.5},i={x:(.5*this.texScale.x-this.camPos.x)*this.zoom/this.cvs.width+.5,y:(.5*this.texScale.y-this.camPos.y)*this.zoom/this.cvs.height+.5};if(!(t.x<e.x||t.y<e.y||t.x>i.x||t.y>i.y))return t={x:(t.x-e.x)/(i.x-e.x)*this.texScale.x,y:(t.y-e.y)/(i.y-e.y)*this.texScale.y},t}toTexCoords(t){return t.x=Math.floor(t.x*this.texScale.x),t.y=Math.floor(t.y*this.texScale.y),t}createProgram(t,e){if(this.program=this.gl.createProgram(),this.gl.attachShader(this.program,t),this.gl.attachShader(this.program,e),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.error(this.gl.getProgramInfoLog(this.program)),null;this.gl.useProgram(this.program)}compileShader(t,e){let i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.error(this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i),null)}createPosAttribute(){let t=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);let e=[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5];this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),this.a_vert=this.gl.getAttribLocation(this.program,"vert"),this.gl.vertexAttribPointer(this.a_vert,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.a_vert)}createUniforms(){this.u_cam=this.gl.getUniformLocation(this.program,"cam"),this.u_tex=this.gl.getUniformLocation(this.program,"tex_scale"),this.u_view=this.gl.getUniformLocation(this.program,"view_scale"),this.u_zoom=this.gl.getUniformLocation(this.program,"zoom")}}class tt{constructor(t,e,i){(0,j.A)(this,"loaded",void 0),(0,j.A)(this,"socket",void 0),(0,j.A)(this,"loadingp",void 0),(0,j.A)(this,"uiwrapper",void 0),(0,j.A)(this,"glWindow",void 0),(0,j.A)(this,"allowDraw",void 0),this.loaded=!1,this.socket=null,this.loadingp=i,this.uiwrapper=e,this.glWindow=t,this.allowDraw=!0}async downloadProgress(t){let e=t.headers.get("Content-Length"),i=new Uint8Array(e),o=0,s=t.body.getReader();while(1){let{done:t,value:e}=await s.read();if(e&&(i.set(e,o),o+=e.length),t)break}return i}prepare(t){let e=new Uint8Array(11);for(let i=0;i<3;i++)e[8+i]=t[i];return e}setPixel(t,e,i){let o=new Uint8Array(11);this.putUint32(o.buffer,0,t),this.putUint32(o.buffer,4,e);for(let s=0;s<3;s++)o[8+s]=i[s];this.glWindow.setPixelColor(t,e,i),this.glWindow.draw()}handleSocketSetPixel(t){if(this.loaded){let e=this.getUint32(t,0),i=this.getUint32(t,4),o=new Uint8Array(t.slice(8));this.glWindow.setPixelColor(e,i,o),this.glWindow.draw()}}async setImage(t){let e=new Image,i=new Blob([t],{type:"image/png"}),o=URL.createObjectURL(i);e.src=o,this.glWindow.setTexture(e),this.glWindow.draw();let s=new Promise(((t,i)=>{e.onload=()=>{this.glWindow.setTexture(e),this.glWindow.draw(),t()},e.onerror=i}));await s}putUint32(t,e,i){let o=new DataView(t);o.setUint32(e,i,!1)}getUint32(t,e){let i=new DataView(t);return i.getUint32(e,!1)}keyPrompt(){let t=prompt("This canvas uses a whitelist.\n\nIf you don't have a key you can still view the canvas but you will not be able to draw.\n\nTo request an access key you can create an issue on the GitHub project.\n\nIf you already have one, enter it here.","");fetch("./verifykey?key="+t).then((async t=>{t.ok?window.location.reload():alert("Bad key.")}))}}var et={data(){return{val_x:null,val_y:null,pos:null,ws:null,connected:!1,colorField:null,colorSwatches:[],cvs:null,glWindow:null,place:null,color:null,dragdown:null,touchID:null,touchScaling:null,lastMovePos:null,lastScalingDist:null,timerRunning:!1,seconds:0,timer:null,secondTimer:null,timerValue:null,palette:[],activeSwatch:0,loaded:!1,savedPixels:[],isGod:null}},created(){this.setViewport()},watch:{loaded(t){t&&this.renderSavedPIxels()}},mounted(){document.title="Pixelbattle",this.$data.howToOpen=0,this.$data.colorField=document.querySelector("#color-field"),this.$data.cvs=document.querySelector("#viewport-canvas"),this.$data.timerValue=document.querySelector("#timer"),this.$data.cursorInfo=document.querySelector("#cursor-info"),this.$data.swatches=document.getElementsByClassName("color-swatch"),this.$data.glWindow=new Q(this.$data.cvs),this.$data.place=new tt(this.$data.glWindow,document.querySelector("#ui-wrapper"),document.querySelector("#loading-p")),this.$data.color=new Uint8Array([0,0,0]),this.$data.palette=["#000000","#FFFFFF","#FF0000","#00FF00"],console.log("production"),this.initConnection("/init_canvas"),this.connectToWebSocket("/ws"),this.initEventListeners();const t=navigator.platform.toLowerCase();/(android|webos|iphone|ipad|ipod|blackberry|windows phone)/.test(t)&&console.log("oh my ... god mobile user")},methods:{selectSwatch(t){if(this.activeSwatch==t)return;try{this.swatches[this.activeSwatch].style.borderWidth="0",this.swatches[this.activeSwatch].style.width="30px"}catch{}this.activeSwatch=t,this.swatches[this.activeSwatch].style.borderWidth="2px 3px",this.swatches[this.activeSwatch].style.width="31px";let e=this.palette[this.activeSwatch];e=e.substring(1,7);while(e.length<6)e+="0";this.color[0]=parseInt(e.substring(0,2),16),this.color[1]=parseInt(e.substring(2,4),16),this.color[2]=parseInt(e.substring(4,6),16)},setViewport(){const t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),document.head.appendChild(t)},initConnection(t){this.$data.place.loadingp.innerHTML="loading canvas",fetch(t).then((async t=>{let e=await this.$data.place.downloadProgress(t);await this.$data.place.setImage(e),this.loaded=!0,this.$data.place.loadingp.innerHTML="",this.$data.place.uiwrapper.setAttribute("hide",!0),this.$data.isGod=t.headers.get("Is-God")})).catch((t=>{this.$router.push("/login")}))},initEventListeners(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",(()=>{this.dragdown=!1,document.body.style.cursor="auto"})),window.addEventListener("wheel",this.onWheel),window.addEventListener("resize",(()=>{this.glWindow.updateViewScale(),this.glWindow.draw()}))},coordsUpdate(t){try{this.pos=this.glWindow.click({x:t.clientX,y:t.clientY}),this.val_x=this.pos.x,this.val_y=this.pos.y}catch{}},send(t,e,i){const o={x:Math.floor(t),y:Math.floor(e),color:[i[0],i[1],i[2]]};this.ws.send(JSON.stringify(o))},sendPixel(t,e,i){"true"!=this.isGod?this.timerRunning?(this.timerValue.style.fontWeight="bold",this.timerValue.style.color="firebrick",this.timerValue.style.fontSize="28px",this.timerValue.style.width="30px",this.timerValue.style.borderColor="firebrick",this.timer,clearInterval(this.secondTimer),this.secondTimer=setInterval((()=>{this.timerValue.style.fontSize="16px",this.timerValue.style.fontWeight="normal",this.timerValue.style.color="#134293",this.timerValue.style.width="20px",this.timerValue.style.borderColor="#134293"}),1e3)):(this.timerRunning=!0,this.send(t,e,i),this.seconds=3,this.timerValue.style.opacity=1,this.timer=setInterval((()=>{this.seconds>1?this.seconds--:(clearInterval(this.timer),this.timerRunning=!1,this.timerValue.style.opacity=0)}),1e3)):this.send(t,e,i)},connectToWebSocket(t){const e=new URL(t,location.href);e.protocol="wss",this.ws=new WebSocket(e),this.ws.addEventListener("message",(t=>{this.handleNewPixel(t)}))},handleNewPixel(t){const e=JSON.parse(t.data);this.loaded?this.place.setPixel(e.X,e.Y,new Uint8Array([e.Color[0],e.Color[1],e.Color[2]])):this.savedPixels.push(e)},renderSavedPIxels(){for(const t of this.savedPixels)this.place.setPixel(t.X,t.Y,new Uint8Array([t.Color[0],t.Color[1],t.Color[2]]));this.savedPixels=[]},onMouseDown(t){let e=this;switch(t.button){case 0:this.dragdown=!0,this.lastMovePos={x:t.clientX,y:t.clientY};break;case 1:t.preventDefault(),e.pickColor({x:t.clientX,y:t.clientY});break;case 2:t.ctrlKey?(t.preventDefault(),e.pickColor({x:t.clientX,y:t.clientY})):(t.preventDefault(),e.drawPixel({x:t.clientX,y:t.clientY},this.color))}},drawPixel(t,e){if(t=this.glWindow.click(t),t){const i=this.glWindow.getColor(t);for(let o=0;o<i.length;o++)if(i[o]!=e[o])return this.sendPixel(t.x,t.y,e),!0}return!1},pickColor(t){this.color=this.glWindow.getColor(this.glWindow.click(t));let e="#";for(let o=0;o<this.color.length;o++){let t=this.color[o].toString(16);1==t.length&&(t="0"+t),e+=t}this.colorField.value=e.toUpperCase();var i=new Event("change");this.colorField.dispatchEvent(i)},zoomIn(t){let e=this.glWindow.getZoom();this.glWindow.setZoom(e*t),this.glWindow.draw()},zoomOut(t){let e=this.glWindow.getZoom();this.glWindow.setZoom(e/t),this.glWindow.draw()},onKeyDown(t){switch(t.keyCode){case 189:case 173:t.preventDefault(),this.zoomOut(1.2);break;case 187:case 61:t.preventDefault(),this.zoomIn(1.2);break}},onChange(){let t=this.colorField.value.replace(/[^A-Fa-f0-9]/g,"").toUpperCase();t=t.substring(0,6);while(t.length<6)t+="0";this.color[0]=parseInt(t.substring(0,2),16),this.color[1]=parseInt(t.substring(2,4),16),this.color[2]=parseInt(t.substring(4,6),16),this.palette[this.activeSwatch]="#"+t,this.colorField.value=this.palette[this.activeSwatch]},onTouchMove(t){if(this.touchID++,this.touchScaling&&1!=t.touches.length){let e=Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY);if(null!=this.lastScalingDist){let t=this.lastScalingDist-e;t<0?this.zoomIn(1+.003*Math.abs(t)):this.zoomOut(1+.003*Math.abs(t))}this.lastScalingDist=e}else{try{this.pos=this.glWindow.click({x:t.touches[0].clientX,y:t.touches[0].clientY}),this.val_x=this.pos.x,this.val_y=this.pos.y}catch{}let e={x:t.touches[0].clientX,y:t.touches[0].clientY};this.glWindow.move(e.x-this.lastMovePos.x,e.y-this.lastMovePos.y),this.glWindow.draw(),this.lastMovePos=e}},onWheel(t){let e=this.glWindow.getZoom();t.deltaY>0?e/=1.05:e*=1.05,this.glWindow.setZoom(e),this.glWindow.draw()},onMouseMove(t){const e={x:t.clientX,y:t.clientY};this.dragdown&&(this.glWindow.move(e.x-this.lastMovePos.x,e.y-this.lastMovePos.y),this.glWindow.draw(),document.body.style.cursor="grab"),this.lastMovePos=e},onTouchStart(t){t.preventDefault();let e=this.touchID;this.touchstartTime=(new Date).getTime(),this.lastMovePos={x:t.touches[0].clientX,y:t.touches[0].clientY},2===t.touches.length&&(this.touchScaling=!0,this.lastScalingDist=null),setTimeout((()=>{e==this.$data.touchID&&this.pickColor(this.lastMovePos)}),350)},onTouchEnd(t){this.$data.touchID++;let e=(new Date).getTime()-this.touchstartTime;e<100&&this.drawPixel(this.lastMovePos,this.color),0===t.touches.length&&(this.touchScaling=!1)}}};const it=(0,l.A)(et,[["render",Z],["__scopeId","data-v-22bb0418"]]);var ot=it,st={components:{GLCanvas:ot}};const at=(0,l.A)(st,[["render",L]]);var lt=at;const nt={class:"faculty-page"},rt=(0,o.Fv)('<h2 data-v-2f5e0fe4>Выберите факультет: </h2><form action="/api/faculty" class="form-container" data-v-2f5e0fe4><div class="radio-container" data-v-2f5e0fe4><label class="radio-label" data-v-2f5e0fe4><input type="radio" name="faculty" value="KTU" required data-v-2f5e0fe4> КТУ </label><label class="radio-label" data-v-2f5e0fe4><input type="radio" name="faculty" value="TINT" data-v-2f5e0fe4> ТИНТ </label><label class="radio-label" data-v-2f5e0fe4><input type="radio" name="faculty" value="FTMF" data-v-2f5e0fe4> ФТМФ </label><label class="radio-label" data-v-2f5e0fe4><input type="radio" name="faculty" value="FTMI" data-v-2f5e0fe4> ФТМИ </label><label class="radio-label" data-v-2f5e0fe4><input type="radio" name="faculty" value="NOZH" data-v-2f5e0fe4> НОЖ </label></div><button type="submit" class="send-button" data-v-2f5e0fe4>Подтвердить</button></form>',2);function ht(t,e,i,s,a,l){const n=(0,o.g2)("app-header");return(0,o.uX)(),(0,o.CE)("div",nt,[(0,o.bF)(n),rt])}var ct={components:{AppHeader:x},mounted(){document.title="Choose your faculty"}};const dt=(0,l.A)(ct,[["render",ht],["__scopeId","data-v-2f5e0fe4"]]);var ut=dt,gt=i(1387);const vt={isAuthorized:!1,id:null},mt={getAuthorized:t=>t.isAuthorized,getID:t=>t.id},pt={setAuthorized(t,e){t.isAuthorized=e},setID(t,e){t.id=e}};var ft={namespaced:!0,state:vt,getters:mt,mutations:pt},wt=(0,k.y$)({modules:{UserModule:ft}});const bt=[{path:"/",name:"home",component:lt},{path:"/main",name:"main",component:lt},{path:"/login",name:"login",component:D},{path:"/faculty",name:"faculty",component:ut}],yt=(0,gt.aE)({routes:bt,history:(0,gt.LA)("/")});var xt=yt,_t=i(5130);const St=(0,_t.Ef)(h);St.use(wt).use(xt).mount("#app")},477:function(){}},e={};function i(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,o,s,a){if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],s=t[c][1],a=t[c][2];for(var n=!0,r=0;r<o.length;r++)(!1&a||l>=a)&&Object.keys(i.O).every((function(t){return i.O[t](o[r])}))?o.splice(r--,1):(n=!1,a<l&&(l=a));if(n){t.splice(c--,1);var h=s();void 0!==h&&(e=h)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,s,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,a,l=o[0],n=o[1],r=o[2],h=0;if(l.some((function(e){return 0!==t[e]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(r)var c=r(i)}for(e&&e(o);h<l.length;h++)a=l[h],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(c)},o=self["webpackChunkpb_frontend"]=self["webpackChunkpb_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=i.O(void 0,[504],(function(){return i(298)}));o=i.O(o)})();
//# sourceMappingURL=app.e6cb5c1c.js.map